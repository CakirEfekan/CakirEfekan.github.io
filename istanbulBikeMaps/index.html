<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
      integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
      crossorigin=""
    ></script>

    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }

      #map {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      'use strict'
      async function get() {
        let url = 'data.json'
        let response = await fetch(url)

        if (response.ok) {
          // if HTTP-status is 200-299
          // get the response body (the method explained below)
          let json = await response
          return await json
        } else {
          // alert('HTTP-Error: ' + response.status)
        }
      }
      let stations = get().json
      document.getElementById('map').innerHTML = stations.dataList
      /*var map = L.map('map').setView([41.015137, 28.97953], 10)

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution:
          '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>'
      }).addTo(map)

      stations.dataList.map(
        (station) =>
          function () {
            console.log(station.lat)
            L.marker([station.lat, station.lon])
              .bindPopup('I am a green leaf.')
              .addTo(map)
          }
      )
      /*    L.marker([40.952266, 29.090789])
        .bindPopup('I am a green leaf.')
        .addTo(map)*/
    </script>
    <script src="json.js" async></script>
  </body>
</html>
